@{
    ViewBag.Title = "Home Page";
}
<div>
    @using (@Html.BeginForm("Index", "Home"))
    {
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script>var ajaxUrl="@Url.Action("Evaluate", "Home")";</script>

        <div class="container">
            <div class="card mx-auto" style="width: 18rem;margin-top:2rem;padding-top:2rem;">
                <h2 style="text-align: center;">Calculator</h2>
                <div class="card-body mx-auto">
                    <div class="row">
                        <input type="text" id="txt" class="form-control" value="@ViewBag.Result" aria-describedby="inputGroup-sizing-sm">
                    </div>
                    <div class="row p-3" style="text-align: center;">
                        <input type="button" id="b9" value="9" class="btn btn-primary mr-2">
                        <input type="button" id="b8" value="8" class="btn btn-primary mr-2">
                        <input type="button" id="b7" value="7" class="btn btn-primary mr-2">
                        <input type="button" id="add" value="+" class="btn btn-primary mr-2">
                    </div>
                    <div class="row p-3" style="text-align: center;">
                        <input type="button" id="b6" value="6" class="btn btn-primary mr-2">
                        <input type="button" id="b5" value="5" class="btn btn-primary mr-2">
                        <input type="button" id="b4" value="4" class="btn btn-primary mr-2">
                        <input type="button" id="sub" value="-" class="btn btn-primary mr-2">
                    </div>
                    <div class="row p-3" style="text-align: center;">
                        <input type="button" id="b3" value="3" class="btn btn-primary mr-2">
                        <input type="button" id="b2" value="2" class="btn btn-primary mr-2">
                        <input type="button" id="b1" value="1" class="btn btn-primary mr-2">
                        <input type="button" id="multy" value="*" class="btn btn-primary mr-2">
                    </div>
                    <div class="row p-3" style="text-align: center;">
                        <input type="button" id="b0" value="0" class="btn btn-primary mr-2">
                        <input type="button" id="bd" value="." class="btn btn-primary mr-2">
                        <input type="button" id="re" value="Clear" class="btn btn-primary mr-2">
                        <input type="button" id="div" value="/" class="btn btn-primary mr-2">
                    </div>
                    <div class="row p-3">
                        <input type="button" id="eq" value="=" class="btn btn-primary btn-lg btn-block mr-2">
                    </div>
                </div>
            </div>
        </div>
    }
</div>
<script>
    $(function () {
        $("#txt").keypress(function (e) {
            if (String.fromCharCode(e.keyCode).match(/[^0-9+-/*]/g)) return false;
        });

        $("#b0").click(function () {
            var x = document.getElementById("txt").value;
            if (x == "0") {
                $("#txt").val("0");
            } else {
                $("#txt").val(x + "0")
            }
        });

        $("#b1").click(function () {
            var x = document.getElementById("txt").value;
            if (x == "0") {
                $("#txt").val("1");
            } else {
                $("#txt").val(x + "1")
            }
        });

        $("#b2").click(function () {
            var x = document.getElementById("txt").value;
            if (x == "0") {
                $("#txt").val("2");
            } else {
                $("#txt").val(x + "2")
            }
        });

        $("#b3").click(function () {
            var x = document.getElementById("txt").value;
            if (x == "0") {
                $("#txt").val("3");
            } else {
                $("#txt").val(x + "3")
            }
        });

        $("#b4").click(function () {
            var x = document.getElementById("txt").value;
            if (x == "0") {
                $("#txt").val("4");
            } else {
                $("#txt").val(x + "4")
            }
        });

        $("#b5").click(function () {
            var x = document.getElementById("txt").value;
            if (x == "0") {
                $("#txt").val("5");
            } else {
                $("#txt").val(x + "5")
            }
        });

        $("#b6").click(function () {
            var x = document.getElementById("txt").value;
            if (x == "0") {
                $("#txt").val("6");
            } else {
                $("#txt").val(x + "6")
            }
        });

        $("#b7").click(function () {
            var x = document.getElementById("txt").value;
            if (x == "0") {
                $("#txt").val("7");
            } else {
                $("#txt").val(x + "7")
            }
        });

        $("#b8").click(function () {
            var x = document.getElementById("txt").value;
            if (x == "0") {
                $("#txt").val("8");
            } else {
                $("#txt").val(x + "8")
            }
        });

        $("#b9").click(function () {
            var x = document.getElementById("txt").value;
            if (x == "0") {
                $("#txt").val("9");
            } else {
                $("#txt").val(x + "9")
            }
        });


        $("#div").click(function () {
            var x = document.getElementById("txt").value;
            var y = x.slice(-1)
            if (y == "/" || y == "+" || y == "*" || y == "-") { } else {
                $("#txt").val(x + "/")
            }
        });

        $("#multy").click(function () {
            var x = document.getElementById("txt").value;
            var y = x.slice(-1)
            if (y == "/" || y == "+" || y == "*" || y == "-") { } else {
                $("#txt").val(x + "*")
            }
        });

        $("#sub").click(function () {
            var x = document.getElementById("txt").value;
            var y = x.slice(-1)
            if (y == "/" || y == "+" || y == "*" || y == "-") { } else {
                $("#txt").val(x + "-")
            }
        });

        $("#add").click(function () {
            var x = document.getElementById("txt").value;
            var y = x.slice(-1)
            if (y == "/" || y == "+" || y == "*" || y == "-") { } else {
                $("#txt").val(x + "+")
            }
        });
        $("#eq").click(function () {

            var x = $('#txt').val();
            console.log(eval(x));
            var input = eval(x);

            $.ajax({
                url: ajaxUrl,
                type: "post",
                data: { textFrom: input },
                dataType: "json",
                success: function (result) {
                    $('#txt').val(result.textTo);
                },
                error: function (result) {
                    $('#txt').html('error');
                }
            });

        });
        $("#re").click(function () {

            var x = $('#txt').val();

            var input ="";

            $.ajax({
                url: ajaxUrl,
                type: "post",
                data: { textFrom: input },
                dataType: "json",
                success: function (result) {
                    $('#txt').val(result.textTo);
                },
                error: function (result) {
                    $('#txt').html('error');
                }
            });

        });

    });
</script>
